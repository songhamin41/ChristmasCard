<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨ ğŸ“¬</title>
</head>
<body>
    <div class="container">
        <h1>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨ ğŸ“¬</h1>

        <!-- í¸ì§€ ì‘ì„± ë²„íŠ¼ -->
        <a href="{{ url_for('main.write_letter') }}" class="write-button">í¸ì§€ ì‘ì„± âœï¸</a>

        <!-- í¸ì§€ ë¦¬ìŠ¤íŠ¸ -->
        <ul>
            {% for letter in letters %}
            <li class="letter-card">
                <h2>{{ letter.name }} - {{ letter.date.strftime('%Y-%m-%d') }}</h2>
                <p>{{ letter.message }}</p>
                {% if letter.image %}
                <img src="{{ url_for('static', filename='uploads/' + letter.image) }}" alt="Image" class="letter-image">
                {% endif %}

                <!-- ì‚­ì œ ë²„íŠ¼ -->
                <form action="{{ url_for('main.delete_letter', letter_id=letter.id) }}" method="POST" class="delete-form">
                    <button type="submit" class="delete-button">ì§€ìš°ê¸° ğŸ—‘ï¸</button>
                </form>

                <!-- ìˆ˜ì • ë²„íŠ¼ -->
                <form action="{{ url_for('main.edit_letter', letter_id=letter.id) }}" method="GET" class="edit-form">
                    <button type="submit" class="edit-button">ìˆ˜ì •í•˜ê¸° ğŸ“</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- ë¸Œê¸ˆ -->
    <audio id="bgm" autoplay loop>
        <source src="{{ url_for('static', filename='bgm/christmas_bgm.mp3') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <button id="toggle-audio">ğŸ”‡ ì†Œë¦¬ ë„ê¸°</button>

    <script>
        const bgm = document.getElementById('bgm');
        const toggleAudioButton = document.getElementById('toggle-audio');

        toggleAudioButton.addEventListener('click', () => {
            if (bgm.muted) {
                bgm.muted = false;
                toggleAudioButton.textContent = 'ğŸ”‡ ì†Œë¦¬ ë„ê¸°';
            } else {
                bgm.muted = true;
                toggleAudioButton.textContent = 'ğŸ”Š ì†Œë¦¬ ì¼œê¸°';
            }
        });

        // ë¸Œë¼ìš°ì € ì •ì±…ì— ë”°ë¥¸ ì´ˆê¸° ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            bgm.play().catch(() => {
                bgm.muted = true;
                toggleAudioButton.textContent = 'ğŸ”Š ì†Œë¦¬ ì¼œê¸°';
            });
        });
    </script>
</body>
</html>
